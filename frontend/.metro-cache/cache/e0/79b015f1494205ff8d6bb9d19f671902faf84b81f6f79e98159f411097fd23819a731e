{"dependencies":[{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":21},"end":{"line":2,"column":63,"index":84}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}},{"name":"./query.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":85},"end":{"line":3,"column":35,"index":120}}],"key":"wqUrYlRol92tW0ObRFMnxaalj2Y=","exportNames":["*"],"imports":1}},{"name":"./notifyManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":121},"end":{"line":4,"column":51,"index":172}}],"key":"sE8Jk2BSATSKXEwal1fu77sfV3E=","exportNames":["*"],"imports":1}},{"name":"./subscribable.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":173},"end":{"line":5,"column":49,"index":222}}],"key":"f0fxTGZggQRtb//cHMvH9AHIWOw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"QueryCache\",{enumerable:!0,get:function(){return h}});var t=r(d[0]),s=r(d[1]),n=r(d[2]),u=r(d[3]),h=class extends u.Subscribable{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(n,u,h){const o=u.queryKey,y=u.queryHash??(0,t.hashQueryKeyByOptions)(o,u);let l=this.get(y);return l||(l=new s.Query({client:n,queryKey:o,queryHash:y,options:n.defaultQueryOptions(u),state:h,defaultOptions:n.getQueryDefaults(o)}),this.add(l)),l}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:\"added\",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:\"removed\",query:t}))}clear(){n.notifyManager.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(s){const n={exact:!0,...s};return this.getAll().find(s=>(0,t.matchQuery)(n,s))}findAll(s={}){const n=this.getAll();return Object.keys(s).length>0?n.filter(n=>(0,t.matchQuery)(s,n)):n}notify(t){n.notifyManager.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){n.notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){n.notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}}});","lineCount":1,"map":[[1,90,94,0,"Object"],[1,97,94,0,"defineProperty"],[1,112,94,0,"e"],[1,114,94,0],[1,128,94,0,"enumerable"],[1,140,94,0],[1,142,94,0,"get"],[1,146,94,0],[1,164,95,2,"QueryCache"],[1,165,95,12],[1,169,2,0],[1,173,2,0,"_utilsJs"],[1,175,2,0,"r"],[1,177,2,0,"d"],[1,179,2,0],[1,183,3,0,"_queryJs"],[1,185,3,0,"r"],[1,187,3,0,"d"],[1,189,3,0],[1,193,4,0,"_notifyManagerJs"],[1,195,4,0,"r"],[1,197,4,0,"d"],[1,199,4,0],[1,203,5,0,"_subscribableJs"],[1,205,5,0,"r"],[1,207,5,0,"d"],[1,209,5,0],[1,213,6,4,"QueryCache"],[1,215,6,17],[1,229,6,31,"Subscribable"],[1,231,6,43,"Subscribable"],[1,244,7,2,"constructor"],[1,256,7,14,"config"],[1,258,7,23],[1,259,7,24],[1,262,8,4,"super"],[1,270,9,4,"this"],[1,275,9,9,"config"],[1,282,9,18,"config"],[1,284,10,4,"this"],[1,290,10,9,"queries"],[1,292,10,36],[1,296,10,40,"Map"],[1,299,11,2],[1,300,12,2,"queries"],[1,303,13,2,"build"],[1,309,13,8,"client"],[1,311,13,16,"options"],[1,313,13,25,"state"],[1,316,14,4],[1,322,14,10,"queryKey"],[1,324,14,21,"options"],[1,326,14,29,"queryKey"],[1,335,15,10,"queryHash"],[1,337,15,22,"options"],[1,339,15,30,"queryHash"],[1,351,15,43],[1,353,15,43,"hashQueryKeyByOptions"],[1,355,15,64,"hashQueryKeyByOptions"],[1,378,15,65,"queryKey"],[1,380,15,75,"options"],[1,383,16,4],[1,387,16,8,"query"],[1,389,16,16,"this"],[1,394,16,21,"get"],[1,398,16,25,"queryHash"],[1,401,28,4],[1,408,17,9,"query"],[1,412,18,6,"query"],[1,414,18,14],[1,418,18,18,"Query"],[1,420,18,23,"Query"],[1,426,18,24],[1,427,19,8,"client"],[1,436,20,8,"queryKey"],[1,447,21,8,"queryHash"],[1,459,22,8,"options"],[1,467,22,17,"client"],[1,469,22,24,"defaultQueryOptions"],[1,489,22,44,"options"],[1,492,23,8,"state"],[1,500,24,8,"defaultOptions"],[1,515,24,24,"client"],[1,517,24,31,"getQueryDefaults"],[1,534,24,48,"queryKey"],[1,539,26,6,"this"],[1,544,26,11,"add"],[1,548,26,15,"query"],[1,552,28,11,"query"],[1,553,29,2],[1,554,30,2,"add"],[1,558,30,6,"query"],[1,561,31,9,"this"],[1,567,31,14,"queries"],[1,569,31,23,"has"],[1,573,31,27,"query"],[1,575,31,33,"queryHash"],[1,588,32,6,"this"],[1,594,32,11,"queries"],[1,596,32,20,"set"],[1,600,32,24,"query"],[1,602,32,30,"queryHash"],[1,612,32,41,"query"],[1,615,33,6,"this"],[1,620,33,11,"notify"],[1,627,33,18],[1,628,34,8,"type"],[1,633,34,14],[1,641,35,8,"query"],[1,651,38,2],[1,652,39,2,"remove"],[1,659,39,9,"query"],[1,662,40,4],[1,668,40,10,"queryInMap"],[1,670,40,23,"this"],[1,676,40,28,"queries"],[1,678,40,37,"get"],[1,682,40,41,"query"],[1,684,40,47,"queryHash"],[1,695,41,8,"queryInMap"],[1,699,42,6,"query"],[1,701,42,12,"destroy"],[1,711,43,10,"queryInMap"],[1,715,43,25,"query"],[1,718,44,8,"this"],[1,724,44,13,"queries"],[1,726,44,22,"delete"],[1,733,44,29,"query"],[1,735,44,35,"queryHash"],[1,746,46,6,"this"],[1,751,46,11,"notify"],[1,758,46,18],[1,759,46,20,"type"],[1,764,46,26],[1,774,46,37,"query"],[1,784,48,2],[1,785,49,2,"clear"],[1,793,50,4,"notifyManager"],[1,795,50,17,"notifyManager"],[1,809,50,18,"batch"],[1,815,50,24],[1,820,51,6,"this"],[1,825,51,11,"getAll"],[1,834,51,20,"forEach"],[1,842,51,29,"query"],[1,846,52,8,"this"],[1,851,52,13,"remove"],[1,858,52,20,"query"],[1,864,55,2],[1,865,56,2,"get"],[1,869,56,6,"queryHash"],[1,872,57,4],[1,879,57,11,"this"],[1,885,57,16,"queries"],[1,887,57,25,"get"],[1,891,57,29,"queryHash"],[1,893,58,2],[1,894,59,2,"getAll"],[1,903,60,4],[1,909,60,11],[1,913,60,15,"this"],[1,919,60,20,"queries"],[1,921,60,29,"values"],[1,930,61,2],[1,931,62,2,"find"],[1,936,62,7,"filters"],[1,939,63,4],[1,945,63,10,"defaultedFilters"],[1,947,63,29],[1,948,63,31,"exact"],[1,955,63,38],[1,960,63,47,"filters"],[1,963,64,4],[1,970,64,11,"this"],[1,975,64,16,"getAll"],[1,984,64,25,"find"],[1,989,65,7,"query"],[1,993,65,17],[1,995,65,17,"matchQuery"],[1,997,65,27,"matchQuery"],[1,1009,65,28,"defaultedFilters"],[1,1011,65,46,"query"],[1,1014,67,2],[1,1015,68,2,"findAll"],[1,1023,68,10,"filters"],[1,1025,68,20],[1,1026,68,21],[1,1029,69,4],[1,1035,69,10,"queries"],[1,1037,69,20,"this"],[1,1042,69,25,"getAll"],[1,1051,70,4],[1,1058,70,11,"Object"],[1,1065,70,18,"keys"],[1,1070,70,23,"filters"],[1,1073,70,32,"length"],[1,1080,70,41],[1,1082,70,45,"queries"],[1,1084,70,53,"filter"],[1,1091,70,61,"query"],[1,1095,70,71],[1,1097,70,71,"matchQuery"],[1,1099,70,81,"matchQuery"],[1,1111,70,82,"filters"],[1,1113,70,91,"query"],[1,1117,70,101,"queries"],[1,1118,71,2],[1,1119,72,2,"notify"],[1,1126,72,9,"event"],[1,1129,73,4,"notifyManager"],[1,1131,73,17,"notifyManager"],[1,1145,73,18,"batch"],[1,1151,73,24],[1,1156,74,6,"this"],[1,1161,74,11,"listeners"],[1,1171,74,21,"forEach"],[1,1179,74,30,"listener"],[1,1183,75,8,"listener"],[1,1185,75,17,"event"],[1,1191,78,2],[1,1192,79,2,"onFocus"],[1,1202,80,4,"notifyManager"],[1,1204,80,17,"notifyManager"],[1,1218,80,18,"batch"],[1,1224,80,24],[1,1229,81,6,"this"],[1,1234,81,11,"getAll"],[1,1243,81,20,"forEach"],[1,1251,81,29,"query"],[1,1255,82,8,"query"],[1,1257,82,14,"onFocus"],[1,1270,85,2],[1,1271,86,2,"onOnline"],[1,1282,87,4,"notifyManager"],[1,1284,87,17,"notifyManager"],[1,1298,87,18,"batch"],[1,1304,87,24],[1,1309,88,6,"this"],[1,1314,88,11,"getAll"],[1,1323,88,20,"forEach"],[1,1331,88,29,"query"],[1,1335,89,8,"query"],[1,1337,89,14,"onOnline"],[1,1351,92,2],[1,1353,93,2],[1,1356]],"functionMap":{"names":["<global>","QueryCache","QueryCache#constructor","QueryCache#build","QueryCache#add","QueryCache#remove","QueryCache#clear","notifyManager.batch$argument_0","getAll.forEach$argument_0","QueryCache#get","QueryCache#getAll","QueryCache#find","getAll.find$argument_0","QueryCache#findAll","queries.filter$argument_0","QueryCache#notify","listeners.forEach$argument_0","QueryCache#onFocus","QueryCache#onOnline"],"mappings":"AAA;iBCK;ECC;GDI;EEE;GFgB;EGC;GHQ;EIC;GJS;EKC;wBCC;4BCC;ODE;KDC;GLC;EQC;GRE;ESC;GTE;EUC;MCG,8CD;GVE;EYC;4DCE,qCD;GZC;EcC;wBRC;6BSC;OTE;KQC;GdC;EgBC;wBVC;4BCC;ODE;KUC;GhBC;EiBC;wBXC;4BCC;ODE;KWC;GjBC;CDC"},"hasCjsExports":false},"type":"js/module"}]}