{"dependencies":[{"name":"./focusManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":18},"end":{"line":2,"column":49,"index":67}}],"key":"MPsbeootU8NXvIenUHGK2O5yd1g=","exportNames":["*"],"imports":1}},{"name":"./onlineManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":68},"end":{"line":3,"column":51,"index":119}}],"key":"Otgh8ikMRnqhzHrPaw7eERXpoTM=","exportNames":["*"],"imports":1}},{"name":"./thenable.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":120},"end":{"line":4,"column":48,"index":168}}],"key":"kKA5IQ5mf6XoWFagMsmQasyMyhE=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":169},"end":{"line":5,"column":45,"index":214}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"CancelledError\",{enumerable:!0,get:function(){return l}}),Object.defineProperty(e,\"canFetch\",{enumerable:!0,get:function(){return s}}),Object.defineProperty(e,\"createRetryer\",{enumerable:!0,get:function(){return y}}),Object.defineProperty(e,\"isCancelledError\",{enumerable:!0,get:function(){return f}});var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=r(d[3]);function u(n){return Math.min(1e3*2**n,3e4)}function s(n){return\"online\"!==(n??\"online\")||t.onlineManager.isOnline()}var l=class extends Error{constructor(n){super(\"CancelledError\"),this.revert=n?.revert,this.silent=n?.silent}};function f(n){return n instanceof l}function y(f){let y,p=!1,h=0;const b=(0,o.pendingThenable)(),v=()=>\"pending\"!==b.status,P=()=>n.focusManager.isFocused()&&(\"always\"===f.networkMode||t.onlineManager.isOnline())&&f.canRun(),j=()=>s(f.networkMode)&&f.canRun(),M=n=>{v()||(y?.(),b.resolve(n))},O=n=>{v()||(y?.(),b.reject(n))},w=()=>new Promise(n=>{y=t=>{(v()||P())&&n(t)},f.onPause?.()}).then(()=>{y=void 0,v()||f.onContinue?.()}),C=()=>{if(v())return;let n;const t=0===h?f.initialPromise:void 0;try{n=t??f.fn()}catch(t){n=Promise.reject(t)}Promise.resolve(n).then(M).catch(n=>{if(v())return;const t=f.retry??(c.isServer?0:3),o=f.retryDelay??u,s=\"function\"==typeof o?o(h,n):o,l=!0===t||\"number\"==typeof t&&h<t||\"function\"==typeof t&&t(h,n);!p&&l?(h++,f.onFail?.(h,n),(0,c.sleep)(s).then(()=>P()?void 0:w()).then(()=>{p?O(n):C()})):O(n)})};return{promise:b,status:()=>b.status,cancel:n=>{if(!v()){const t=new l(n);O(t),f.onCancel?.(t)}},continue:()=>(y?.(),b),cancelRetry:()=>{p=!0},continueRetry:()=>{p=!1},canStart:j,start:()=>(j()?C():w().then(C),b)}}});","lineCount":1,"map":[[1,90,127,0,"Object"],[1,97,127,0,"defineProperty"],[1,112,127,0,"e"],[1,114,127,0],[1,132,127,0,"enumerable"],[1,144,127,0],[1,146,127,0,"get"],[1,150,127,0],[1,168,128,2,"CancelledError"],[1,169,128,16],[1,173,127,0,"Object"],[1,180,127,0,"defineProperty"],[1,195,127,0,"e"],[1,197,127,0],[1,209,127,0,"enumerable"],[1,221,127,0],[1,223,127,0,"get"],[1,227,127,0],[1,245,129,2,"canFetch"],[1,246,129,10],[1,250,127,0,"Object"],[1,257,127,0,"defineProperty"],[1,272,127,0,"e"],[1,274,127,0],[1,291,127,0,"enumerable"],[1,303,127,0],[1,305,127,0,"get"],[1,309,127,0],[1,327,130,2,"createRetryer"],[1,328,130,15],[1,332,127,0,"Object"],[1,339,127,0,"defineProperty"],[1,354,127,0,"e"],[1,356,127,0],[1,376,127,0,"enumerable"],[1,388,127,0],[1,390,127,0,"get"],[1,394,127,0],[1,412,131,2,"isCancelledError"],[1,413,131,18],[1,417,2,0],[1,421,2,0,"_focusManagerJs"],[1,423,2,0,"r"],[1,425,2,0,"d"],[1,427,2,0],[1,431,3,0,"_onlineManagerJs"],[1,433,3,0,"r"],[1,435,3,0,"d"],[1,437,3,0],[1,441,4,0,"_thenableJs"],[1,443,4,0,"r"],[1,445,4,0,"d"],[1,447,4,0],[1,451,5,0,"_utilsJs"],[1,453,5,0,"r"],[1,455,5,0,"d"],[1,457,5,0],[1,461,6,0],[1,470,6,9,"defaultRetryDelay"],[1,472,6,27,"failureCount"],[1,475,7,2],[1,482,7,9,"Math"],[1,487,7,14,"min"],[1,491,7,18],[1,495,7,24],[1,498,7,29,"failureCount"],[1,500,7,43],[1,504,8,0],[1,505,9,0],[1,514,9,9,"canFetch"],[1,516,9,18,"networkMode"],[1,519,10,2],[1,525,10,39],[1,537,10,10,"networkMode"],[1,540,10,25],[1,551,10,50,"onlineManager"],[1,553,10,63,"onlineManager"],[1,567,10,64,"isOnline"],[1,577,11,0],[1,578,12,0],[1,582,12,4,"CancelledError"],[1,584,12,21],[1,598,12,35,"Error"],[1,604,13,2,"constructor"],[1,616,13,14,"options"],[1,619,14,4,"super"],[1,625,14,10],[1,643,15,4,"this"],[1,648,15,9,"revert"],[1,655,15,18,"options"],[1,658,15,27,"revert"],[1,665,16,4,"this"],[1,670,16,9,"silent"],[1,677,16,18,"options"],[1,680,16,27,"silent"],[1,686,17,2],[1,689,19,0],[1,698,19,9,"isCancelledError"],[1,700,19,26,"value"],[1,703,20,2],[1,710,20,9,"value"],[1,723,20,26,"CancelledError"],[1,724,21,0],[1,725,22,0],[1,734,22,9,"createRetryer"],[1,736,22,23,"config"],[1,739,23,2],[1,743,25,6,"continueFn"],[1,745,23,6,"isRetryCancelled"],[1,748,23,25],[1,750,24,6,"failureCount"],[1,752,24,21],[1,754,26,2],[1,760,26,8,"thenable"],[1,763,26,19],[1,765,26,19,"pendingThenable"],[1,767,26,34,"pendingThenable"],[1,786,27,8,"isResolved"],[1,788,27,21,"isResolved"],[1,792,27,47],[1,804,27,27,"thenable"],[1,806,27,36,"status"],[1,813,41,8,"canContinue"],[1,815,41,22,"canContinue"],[1,819,41,28,"focusManager"],[1,821,41,40,"focusManager"],[1,834,41,41,"isFocused"],[1,848,41,80],[1,859,41,57,"config"],[1,861,41,64,"networkMode"],[1,874,41,92,"onlineManager"],[1,876,41,105,"onlineManager"],[1,890,41,106,"isOnline"],[1,903,41,121,"config"],[1,905,41,128,"canRun"],[1,914,42,8,"canStart"],[1,916,42,19,"canStart"],[1,920,42,25,"canFetch"],[1,922,42,34,"config"],[1,924,42,41,"networkMode"],[1,938,42,57,"config"],[1,940,42,64,"canRun"],[1,949,43,8,"resolve"],[1,951,43,19,"value"],[1,955,44,9,"isResolved"],[1,961,45,6,"continueFn"],[1,967,46,6,"thenable"],[1,969,46,15,"resolve"],[1,977,46,23,"value"],[1,982,49,8,"reject"],[1,984,49,18,"value"],[1,988,50,9,"isResolved"],[1,994,51,6,"continueFn"],[1,1000,52,6,"thenable"],[1,1002,52,15,"reject"],[1,1009,52,22,"value"],[1,1014,55,8,"pause"],[1,1016,55,16,"pause"],[1,1020,56,11],[1,1024,56,15,"Promise"],[1,1032,56,24,"continueResolve"],[1,1036,57,6,"continueFn"],[1,1038,57,20,"value"],[1,1043,58,12,"isResolved"],[1,1048,58,28,"canContinue"],[1,1054,59,10,"continueResolve"],[1,1056,59,26,"value"],[1,1060,62,6,"config"],[1,1062,62,13,"onPause"],[1,1076,63,7,"then"],[1,1081,63,12],[1,1086,64,6,"continueFn"],[1,1093,64,16,"undefined"],[1,1095,65,11,"isResolved"],[1,1100,66,8,"config"],[1,1102,66,15,"onContinue"],[1,1119,70,8,"run"],[1,1121,70,14,"run"],[1,1126,71,4],[1,1129,71,8,"isResolved"],[1,1133,72,6],[1,1140,74,4],[1,1144,74,8,"promiseOrValue"],[1,1146,75,4],[1,1152,75,10,"initialPromise"],[1,1154,75,44],[1,1158,75,27,"failureCount"],[1,1160,75,48,"config"],[1,1162,75,55,"initialPromise"],[1,1182,75,69,"undefined"],[1,1184,76,4],[1,1188,77,6,"promiseOrValue"],[1,1190,77,23,"initialPromise"],[1,1193,77,41,"config"],[1,1195,77,48,"fn"],[1,1199,78,4],[1,1200,78,6],[1,1206,78,13,"error"],[1,1209,79,6,"promiseOrValue"],[1,1211,79,23,"Promise"],[1,1219,79,31,"reject"],[1,1226,79,38,"error"],[1,1228,80,4],[1,1229,81,4,"Promise"],[1,1237,81,12,"resolve"],[1,1245,81,20,"promiseOrValue"],[1,1248,81,36,"then"],[1,1253,81,41,"resolve"],[1,1256,81,50,"catch"],[1,1262,81,57,"error"],[1,1266,82,6],[1,1269,82,10,"isResolved"],[1,1273,83,8],[1,1280,85,6],[1,1286,85,12,"retry"],[1,1288,85,20,"config"],[1,1290,85,27,"retry"],[1,1298,85,37,"isServer"],[1,1300,85,45,"isServer"],[1,1309,85,48],[1,1311,85,52],[1,1314,86,12,"retryDelay"],[1,1316,86,25,"config"],[1,1318,86,32,"retryDelay"],[1,1330,86,46,"defaultRetryDelay"],[1,1332,87,12,"delay"],[1,1334,87,42],[1,1353,87,27,"retryDelay"],[1,1355,87,55,"retryDelay"],[1,1357,87,66,"failureCount"],[1,1359,87,80,"error"],[1,1362,87,89,"retryDelay"],[1,1364,88,12,"shouldRetry"],[1,1367,88,36],[1,1371,88,26,"retry"],[1,1374,88,61],[1,1391,88,51,"retry"],[1,1394,88,73,"failureCount"],[1,1396,88,88,"retry"],[1,1399,88,114],[1,1418,88,104,"retry"],[1,1421,88,128,"retry"],[1,1423,88,134,"failureCount"],[1,1425,88,148,"error"],[1,1429,89,10,"isRetryCancelled"],[1,1432,89,31,"shouldRetry"],[1,1435,93,6,"failureCount"],[1,1439,94,6,"config"],[1,1441,94,13,"onFail"],[1,1450,94,22,"failureCount"],[1,1452,94,36,"error"],[1,1456,95,6],[1,1458,95,6,"sleep"],[1,1460,95,11,"sleep"],[1,1467,95,12,"delay"],[1,1470,95,19,"then"],[1,1475,95,24],[1,1479,96,15,"canContinue"],[1,1488,96,28,"undefined"],[1,1490,96,40,"pause"],[1,1495,97,9,"then"],[1,1500,97,14],[1,1505,98,12,"isRetryCancelled"],[1,1507,99,10,"reject"],[1,1509,99,17,"error"],[1,1512,101,10,"run"],[1,1519,90,8,"reject"],[1,1521,90,15,"error"],[1,1527,106,2],[1,1533,106,9],[1,1534,107,4,"promise"],[1,1542,107,13,"thenable"],[1,1544,108,4,"status"],[1,1551,108,12,"status"],[1,1555,108,18,"thenable"],[1,1557,108,27,"status"],[1,1564,109,4,"cancel"],[1,1571,28,18,"cancelOptions"],[1,1575,29,4],[1,1579,29,9,"isResolved"],[1,1583,29,23],[1,1584,30,6],[1,1590,30,12,"error"],[1,1592,30,20],[1,1596,30,24,"CancelledError"],[1,1598,30,39,"cancelOptions"],[1,1601,31,6,"reject"],[1,1603,31,13,"error"],[1,1606,32,6,"config"],[1,1608,32,13,"onCancel"],[1,1619,32,24,"error"],[1,1621,33,4],[1,1624,110,4,"continue"],[1,1633,110,14,"continue"],[1,1638,111,6,"continueFn"],[1,1644,112,13,"thenable"],[1,1647,114,4,"cancelRetry"],[1,1659,35,22,"cancelRetry"],[1,1664,36,4,"isRetryCancelled"],[1,1667,36,23],[1,1670,115,4,"continueRetry"],[1,1684,38,24,"continueRetry"],[1,1689,39,4,"isRetryCancelled"],[1,1692,39,23],[1,1695,116,4,"canStart"],[1,1706,117,4,"start"],[1,1712,117,11,"start"],[1,1717,118,10,"canStart"],[1,1721,119,8,"run"],[1,1725,121,8,"pause"],[1,1729,121,16,"then"],[1,1734,121,21,"run"],[1,1737,123,13,"thenable"],[1,1740,126,0],[1,1741,126,1],[1,1744]],"functionMap":{"names":["<global>","defaultRetryDelay","canFetch","CancelledError","CancelledError#constructor","isCancelledError","createRetryer","isResolved","cancel","cancelRetry","continueRetry","canContinue","canStart","resolve","reject","pause","Promise$argument_0","continueFn","Promise.then$argument_0","run","Promise.resolve.then._catch$argument_0","sleep.then$argument_0","sleep.then.then$argument_0","status","_continue","start"],"mappings":"AAA;ACK;CDE;AEC;CFE;qBGC;ECC;GDI;CHC;AKC;CLE;AMC;qBCK,mCD;iBEC;GFM;sBGC;GHE;wBIC;GJE;sBKC,kHL;mBMC,qDN;kBOC;GPK;iBQC;GRK;gBSC;uBCC;mBCC;ODI;KDE,OG;KHK;GTC;caC;wDCW;wBCc;ODE,OE;OFM;KDC;GbC;YiBG,qBjB;ckBE;KlBG;WmBI;KnBO;CNE"},"hasCjsExports":false},"type":"js/module"}]}