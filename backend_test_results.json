{
  "summary": {
    "passed": 34,
    "failed": 0,
    "success_rate": 100.0,
    "timestamp": "2025-09-25T13:07:24.282232"
  },
  "results": [
    {
      "test": "Health Check",
      "success": true,
      "details": "API is healthy",
      "timestamp": "2025-09-25T13:07:05.024502",
      "response_data": {
        "status": "healthy",
        "timestamp": "2025-09-25T13:07:05.021670+00:00"
      }
    },
    {
      "test": "User Signup",
      "success": true,
      "details": "Account created for marco.rossi.061010@fantapay.it",
      "timestamp": "2025-09-25T13:07:05.794664",
      "response_data": {
        "message": "Account created successfully. Please check your email for verification code.",
        "email": "marco.rossi.061010@fantapay.it",
        "otp_sent": true
      }
    },
    {
      "test": "OTP Verification",
      "success": true,
      "details": "Account verified for marco.rossi.061010@fantapay.it",
      "timestamp": "2025-09-25T13:07:06.343251",
      "response_data": {
        "user": {
          "_id": "68d53e79797594d7f42d7f5f",
          "username": "marco_rossi_061010",
          "email": "marco.rossi.061010@fantapay.it",
          "name": "Marco Rossi",
          "password_hash": "$2b$12$xqcFgcTei6lUaQLhrDx6c.NRsxyQ4md3lToa5kEp151y9ye.OXfRW",
          "auth_method": "email",
          "is_verified": true,
          "language": "it",
          "wallet_balance": 0.0,
          "biometric_enabled": false,
          "created_at": "2025-09-25T13:07:05.789000",
          "updated_at": "2025-09-25T13:07:06.338000",
          "last_login": "2025-09-25T13:07:06.338000"
        },
        "session_token": "1bd73a6a-36f6-4be9-9991-66d6fd4ffd64",
        "message": "Account verified successfully"
      }
    },
    {
      "test": "User Login",
      "success": true,
      "details": "Login successful for marco.rossi.061010@fantapay.it",
      "timestamp": "2025-09-25T13:07:07.109748",
      "response_data": {
        "user": {
          "_id": "68d53e79797594d7f42d7f5f",
          "username": "marco_rossi_061010",
          "email": "marco.rossi.061010@fantapay.it",
          "name": "Marco Rossi",
          "password_hash": "$2b$12$xqcFgcTei6lUaQLhrDx6c.NRsxyQ4md3lToa5kEp151y9ye.OXfRW",
          "auth_method": "email",
          "is_verified": true,
          "language": "it",
          "wallet_balance": 0.0,
          "biometric_enabled": false,
          "created_at": "2025-09-25T13:07:05.789000",
          "updated_at": "2025-09-25T13:07:06.338000",
          "last_login": "2025-09-25T13:07:06.338000"
        },
        "session_token": "241eee08-a844-4746-bf16-0bfb5b40d82d",
        "message": "Login successful"
      }
    },
    {
      "test": "Google OAuth Session",
      "success": true,
      "details": "Endpoint accessible, invalid session ID as expected",
      "timestamp": "2025-09-25T13:07:07.750119",
      "response_data": null
    },
    {
      "test": "Get Current User",
      "success": true,
      "details": "User info retrieved for marco.rossi.061010@fantapay.it",
      "timestamp": "2025-09-25T13:07:08.289259",
      "response_data": {
        "_id": "68d53e79797594d7f42d7f5f",
        "email": "marco.rossi.061010@fantapay.it",
        "name": "Marco Rossi",
        "username": "marco_rossi_061010",
        "picture": null,
        "password_hash": "$2b$12$xqcFgcTei6lUaQLhrDx6c.NRsxyQ4md3lToa5kEp151y9ye.OXfRW",
        "auth_method": "email",
        "is_verified": true,
        "language": "it",
        "wallet_balance": 0.0,
        "biometric_enabled": false,
        "created_at": "2025-09-25T13:07:05.789000",
        "updated_at": "2025-09-25T13:07:06.338000",
        "last_login": "2025-09-25T13:07:07.104000"
      }
    },
    {
      "test": "Language Update",
      "success": true,
      "details": "Language updated to English",
      "timestamp": "2025-09-25T13:07:08.838087",
      "response_data": {
        "message": "Language updated successfully"
      }
    },
    {
      "test": "Biometric Toggle",
      "success": true,
      "details": "Biometric authentication enabled",
      "timestamp": "2025-09-25T13:07:09.376713",
      "response_data": {
        "message": "Biometric authentication enabled"
      }
    },
    {
      "test": "Create Competition with Financial Config",
      "success": true,
      "details": "Competition created with correct financial fields: ID 68d53e7d797594d7f42d7f63, matchdays=36, cost=210.0, teams=8, pool=1680.0",
      "timestamp": "2025-09-25T13:07:09.919237",
      "response_data": {
        "_id": "68d53e7d797594d7f42d7f63",
        "name": "Serie A Fantasy League 2024",
        "admin_id": "68d53e79797594d7f42d7f5f",
        "rules": {
          "type": "mixed",
          "daily_prize": 50.0,
          "final_prize_pool": [
            {
              "position": 1,
              "amount": 500.0,
              "description": "First Place"
            },
            {
              "position": 2,
              "amount": 300.0,
              "description": "Second Place"
            },
            {
              "position": 3,
              "amount": 200.0,
              "description": "Third Place"
            }
          ]
        },
        "invite_code": "B1E569C4",
        "invite_link": "fantapay://join/B1E569C4",
        "participants": [
          "68d53e79797594d7f42d7f5f"
        ],
        "wallet_balance": 0.0,
        "is_active": true,
        "standings": {},
        "current_matchday": 1,
        "total_matchdays": 36,
        "participation_cost_per_team": 210.0,
        "expected_teams": 8,
        "total_prize_pool": 1680.0,
        "daily_payment_enabled": false,
        "daily_payment_amount": 0.0,
        "season_ended": false,
        "created_at": "2025-09-25T13:07:09.915103Z",
        "updated_at": "2025-09-25T13:07:09.915105Z"
      }
    },
    {
      "test": "Financial Config Defaults",
      "success": true,
      "details": "Default financial values correctly applied: matchdays=36, cost=210.0, teams=8, pool=1680.0",
      "timestamp": "2025-09-25T13:07:10.474111",
      "response_data": null
    },
    {
      "test": "Custom Financial Config",
      "success": true,
      "details": "Custom financial values correctly stored: matchdays=38, cost=150.0, teams=12, pool=1800.0",
      "timestamp": "2025-09-25T13:07:11.040823",
      "response_data": null
    },
    {
      "test": "Create Competition with Daily Payments",
      "success": true,
      "details": "Competition created with daily payments: \u20ac5.0 per matchday",
      "timestamp": "2025-09-25T13:07:11.582537",
      "response_data": null
    },
    {
      "test": "Create Competition without Daily Payments",
      "success": true,
      "details": "Competition created without daily payments",
      "timestamp": "2025-09-25T13:07:12.117753",
      "response_data": null
    },
    {
      "test": "Matchday Payment Records Creation",
      "success": true,
      "details": "Created 38 payment records, 38 pending",
      "timestamp": "2025-09-25T13:07:12.656168",
      "response_data": null
    },
    {
      "test": "Matchday Payment API",
      "success": true,
      "details": "Paid for 5 matchdays, cost: \u20ac25.0",
      "timestamp": "2025-09-25T13:07:13.237550",
      "response_data": null
    },
    {
      "test": "Matchday Payment Status",
      "success": true,
      "details": "Retrieved payment status: 5 paid matchdays",
      "timestamp": "2025-09-25T13:07:13.779372",
      "response_data": null
    },
    {
      "test": "Admin Payment Status Table",
      "success": true,
      "details": "Retrieved status table for 1 participants",
      "timestamp": "2025-09-25T13:07:14.320105",
      "response_data": null
    },
    {
      "test": "Validation - Invalid Matchdays",
      "success": true,
      "details": "Correctly rejected invalid matchday numbers",
      "timestamp": "2025-09-25T13:07:14.978111",
      "response_data": null
    },
    {
      "test": "Validation - Duplicate Payments",
      "success": true,
      "details": "Correctly rejected duplicate payments",
      "timestamp": "2025-09-25T13:07:14.978138",
      "response_data": null
    },
    {
      "test": "Validation - Payment on Non-Daily Competition",
      "success": true,
      "details": "Correctly rejected payment on competition without daily payments",
      "timestamp": "2025-09-25T13:07:14.978143",
      "response_data": null
    },
    {
      "test": "Payment Balance Updates",
      "success": true,
      "details": "Balance correctly updated: 75.0 -> 65.0",
      "timestamp": "2025-09-25T13:07:15.578926",
      "response_data": null
    },
    {
      "test": "Matchday Payment Transactions",
      "success": true,
      "details": "Found 2 matchday payment transactions",
      "timestamp": "2025-09-25T13:07:16.116732",
      "response_data": null
    },
    {
      "test": "Get My Competitions",
      "success": true,
      "details": "Retrieved 5 competitions",
      "timestamp": "2025-09-25T13:07:16.656860",
      "response_data": [
        {
          "_id": "68d53e7d797594d7f42d7f63",
          "name": "Serie A Fantasy League 2024",
          "rules": {
            "type": "mixed",
            "daily_prize": 50.0,
            "final_prize_pool": [
              {
                "position": 1,
                "amount": 500.0,
                "description": "First Place"
              },
              {
                "position": 2,
                "amount": 300.0,
                "description": "Second Place"
              },
              {
                "position": 3,
                "amount": 200.0,
                "description": "Third Place"
              }
            ]
          },
          "total_matchdays": 36,
          "participation_cost_per_team": 210.0,
          "expected_teams": 8,
          "total_prize_pool": 1680.0,
          "daily_payment_enabled": false,
          "daily_payment_amount": 0.0,
          "admin_id": "68d53e79797594d7f42d7f5f",
          "participants": [
            "68d53e79797594d7f42d7f5f"
          ],
          "invite_code": "B1E569C4",
          "invite_link": "fantapay://join/B1E569C4",
          "wallet_balance": 0.0,
          "is_active": true,
          "standings": {},
          "current_matchday": 1,
          "created_at": "2025-09-25T13:07:09.915000",
          "updated_at": "2025-09-25T13:07:09.915000",
          "season_ended": false
        },
        {
          "_id": "68d53e7e797594d7f42d7f65",
          "name": "Default Financial Config League",
          "rules": {
            "type": "daily",
            "daily_prize": 25.0,
            "final_prize_pool": []
          },
          "total_matchdays": 36,
          "participation_cost_per_team": 210.0,
          "expected_teams": 8,
          "total_prize_pool": 1680.0,
          "daily_payment_enabled": false,
          "daily_payment_amount": 0.0,
          "admin_id": "68d53e79797594d7f42d7f5f",
          "participants": [
            "68d53e79797594d7f42d7f5f"
          ],
          "invite_code": "7BAD5DF2",
          "invite_link": "fantapay://join/7BAD5DF2",
          "wallet_balance": 0.0,
          "is_active": true,
          "standings": {},
          "current_matchday": 1,
          "created_at": "2025-09-25T13:07:10.470000",
          "updated_at": "2025-09-25T13:07:10.470000",
          "season_ended": false
        },
        {
          "_id": "68d53e7f797594d7f42d7f67",
          "name": "Custom Financial Config League",
          "rules": {
            "type": "final",
            "daily_prize": null,
            "final_prize_pool": [
              {
                "position": 1,
                "amount": 1200.0,
                "description": "Winner"
              }
            ]
          },
          "total_matchdays": 38,
          "participation_cost_per_team": 150.0,
          "expected_teams": 12,
          "total_prize_pool": 1800.0,
          "daily_payment_enabled": false,
          "daily_payment_amount": 0.0,
          "admin_id": "68d53e79797594d7f42d7f5f",
          "participants": [
            "68d53e79797594d7f42d7f5f"
          ],
          "invite_code": "1DA4B332",
          "invite_link": "fantapay://join/1DA4B332",
          "wallet_balance": 0.0,
          "is_active": true,
          "standings": {},
          "current_matchday": 1,
          "created_at": "2025-09-25T13:07:11.037000",
          "updated_at": "2025-09-25T13:07:11.037000",
          "season_ended": false
        },
        {
          "_id": "68d53e7f797594d7f42d7f69",
          "name": "Serie A Fantasy - Daily Payments",
          "rules": {
            "type": "mixed",
            "daily_prize": 10.0,
            "final_prize_pool": [
              {
                "position": 1,
                "amount": 500.0,
                "description": "First Place"
              },
              {
                "position": 2,
                "amount": 300.0,
                "description": "Second Place"
              }
            ]
          },
          "total_matchdays": 38,
          "participation_cost_per_team": 190.0,
          "expected_teams": 10,
          "total_prize_pool": 1900.0,
          "daily_payment_enabled": true,
          "daily_payment_amount": 5.0,
          "admin_id": "68d53e79797594d7f42d7f5f",
          "participants": [
            "68d53e79797594d7f42d7f5f"
          ],
          "invite_code": "4AC987B5",
          "invite_link": "fantapay://join/4AC987B5",
          "wallet_balance": 35.0,
          "is_active": true,
          "standings": {},
          "current_matchday": 1,
          "created_at": "2025-09-25T13:07:11.577000",
          "updated_at": "2025-09-25T13:07:15.574000",
          "season_ended": false
        },
        {
          "_id": "68d53e80797594d7f42d7f91",
          "name": "Serie A Fantasy - No Daily Payments",
          "rules": {
            "type": "final",
            "daily_prize": null,
            "final_prize_pool": [
              {
                "position": 1,
                "amount": 1000.0,
                "description": "Winner"
              }
            ]
          },
          "total_matchdays": 36,
          "participation_cost_per_team": 210.0,
          "expected_teams": 8,
          "total_prize_pool": 1680.0,
          "daily_payment_enabled": false,
          "daily_payment_amount": 0.0,
          "admin_id": "68d53e79797594d7f42d7f5f",
          "participants": [
            "68d53e79797594d7f42d7f5f"
          ],
          "invite_code": "6698B957",
          "invite_link": "fantapay://join/6698B957",
          "wallet_balance": 0.0,
          "is_active": true,
          "standings": {},
          "current_matchday": 1,
          "created_at": "2025-09-25T13:07:12.115000",
          "updated_at": "2025-09-25T13:07:12.115000",
          "season_ended": false
        }
      ]
    },
    {
      "test": "Get Competition Details with Financial Config",
      "success": true,
      "details": "Competition details retrieved with financial fields: matchdays=36, cost=210.0, teams=8, pool=1680.0",
      "timestamp": "2025-09-25T13:07:17.200280",
      "response_data": {
        "_id": "68d53e7d797594d7f42d7f63",
        "name": "Serie A Fantasy League 2024",
        "rules": {
          "type": "mixed",
          "daily_prize": 50.0,
          "final_prize_pool": [
            {
              "position": 1,
              "amount": 500.0,
              "description": "First Place"
            },
            {
              "position": 2,
              "amount": 300.0,
              "description": "Second Place"
            },
            {
              "position": 3,
              "amount": 200.0,
              "description": "Third Place"
            }
          ]
        },
        "total_matchdays": 36,
        "participation_cost_per_team": 210.0,
        "expected_teams": 8,
        "total_prize_pool": 1680.0,
        "daily_payment_enabled": false,
        "daily_payment_amount": 0.0,
        "admin_id": "68d53e79797594d7f42d7f5f",
        "participants": [
          {
            "id": "68d53e79797594d7f42d7f5f",
            "name": "Marco Rossi",
            "email": "marco.rossi.061010@fantapay.it"
          }
        ],
        "invite_code": "B1E569C4",
        "invite_link": "fantapay://join/B1E569C4",
        "wallet_balance": 0.0,
        "is_active": true,
        "standings": {},
        "current_matchday": 1,
        "created_at": "2025-09-25T13:07:09.915000",
        "updated_at": "2025-09-25T13:07:09.915000",
        "season_ended": false
      }
    },
    {
      "test": "Update Standings",
      "success": true,
      "details": "Standings updated successfully",
      "timestamp": "2025-09-25T13:07:17.739067",
      "response_data": {
        "message": "Standings updated successfully"
      }
    },
    {
      "test": "Enhanced Standings with Badges",
      "success": true,
      "details": "Enhanced standings with 5 participants, badges, and ranking system updated successfully",
      "timestamp": "2025-09-25T13:07:18.277759",
      "response_data": {
        "message": "Standings updated successfully"
      }
    },
    {
      "test": "Standings Data Persistence",
      "success": true,
      "details": "Standings data persisted correctly for 5 participants",
      "timestamp": "2025-09-25T13:07:18.817719",
      "response_data": null
    },
    {
      "test": "Participant Points Updating",
      "success": true,
      "details": "Points updated for 1 participants with automatic ranking",
      "timestamp": "2025-09-25T13:07:19.392889",
      "response_data": {
        "message": "Standings updated successfully"
      }
    },
    {
      "test": "Get Wallet Balance",
      "success": true,
      "details": "Balance: \u20ac65.0",
      "timestamp": "2025-09-25T13:07:19.929183",
      "response_data": {
        "balance": 65.0
      }
    },
    {
      "test": "Wallet Top-up",
      "success": true,
      "details": "Topped up \u20ac100, new balance: \u20ac165.0",
      "timestamp": "2025-09-25T13:07:20.465831",
      "response_data": {
        "message": "Wallet topped up successfully",
        "new_balance": 165.0
      }
    },
    {
      "test": "Wallet Withdrawal",
      "success": true,
      "details": "Withdrew \u20ac25, new balance: \u20ac140.0",
      "timestamp": "2025-09-25T13:07:21.024740",
      "response_data": {
        "message": "Withdrawal successful",
        "new_balance": 140.0
      }
    },
    {
      "test": "Competition Payment",
      "success": true,
      "details": "Paid \u20ac50 to competition",
      "timestamp": "2025-09-25T13:07:21.561291",
      "response_data": {
        "message": "Payment successful",
        "new_user_balance": 90.0,
        "new_competition_balance": 50.0
      }
    },
    {
      "test": "Transaction History",
      "success": true,
      "details": "Retrieved 6 transactions",
      "timestamp": "2025-09-25T13:07:22.099363",
      "response_data": [
        {
          "_id": "68d53e81797594d7f42d7f93",
          "competition_id": null,
          "type": "deposit",
          "amount": 100.0,
          "description": "Wallet top-up of \u20ac100.0",
          "from_wallet": "external",
          "to_wallet": "personal",
          "user_id": "68d53e79797594d7f42d7f5f"
        },
        {
          "_id": "68d53e81797594d7f42d7f99",
          "competition_id": "68d53e7f797594d7f42d7f69",
          "type": "matchday_payment",
          "amount": 25.0,
          "description": "Matchday payments for Serie A Fantasy - Daily Payments - Matchdays: 1, 2, 3, 4, 5",
          "from_wallet": "personal",
          "to_wallet": "competition",
          "user_id": "68d53e79797594d7f42d7f5f"
        },
        {
          "_id": "68d53e83797594d7f42d7f9d",
          "competition_id": "68d53e7f797594d7f42d7f69",
          "type": "matchday_payment",
          "amount": 10.0,
          "description": "Matchday payments for Serie A Fantasy - Daily Payments - Matchdays: 20, 21",
          "from_wallet": "personal",
          "to_wallet": "competition",
          "user_id": "68d53e79797594d7f42d7f5f"
        },
        {
          "_id": "68d53e88797594d7f42d7f9f",
          "competition_id": null,
          "type": "deposit",
          "amount": 100.0,
          "description": "Wallet top-up of \u20ac100.0",
          "from_wallet": "external",
          "to_wallet": "personal",
          "user_id": "68d53e79797594d7f42d7f5f"
        },
        {
          "_id": "68d53e89797594d7f42d7fa0",
          "competition_id": null,
          "type": "withdraw",
          "amount": 25.0,
          "description": "Withdrawal of \u20ac25.0",
          "from_wallet": "personal",
          "to_wallet": "external",
          "user_id": "68d53e79797594d7f42d7f5f"
        },
        {
          "_id": "68d53e89797594d7f42d7fa1",
          "competition_id": "68d53e7d797594d7f42d7f63",
          "type": "payment",
          "amount": 50.0,
          "description": "Payment to Serie A Fantasy League 2024",
          "from_wallet": "personal",
          "to_wallet": "competition",
          "user_id": "68d53e79797594d7f42d7f5f"
        }
      ]
    },
    {
      "test": "Competition Transactions",
      "success": true,
      "details": "Retrieved 1 competition transactions",
      "timestamp": "2025-09-25T13:07:22.639240",
      "response_data": [
        {
          "_id": "68d53e89797594d7f42d7fa1",
          "competition_id": "68d53e7d797594d7f42d7f63",
          "type": "payment",
          "amount": 50.0,
          "description": "Payment to Serie A Fantasy League 2024",
          "from_wallet": "personal",
          "to_wallet": "competition",
          "user_id": "68d53e79797594d7f42d7f5f",
          "user_name": "Marco Rossi"
        }
      ]
    },
    {
      "test": "Invalid Login",
      "success": true,
      "details": "Correctly rejected invalid credentials",
      "timestamp": "2025-09-25T13:07:23.247613",
      "response_data": null
    },
    {
      "test": "Insufficient Balance",
      "success": true,
      "details": "Correctly rejected insufficient balance",
      "timestamp": "2025-09-25T13:07:23.247638",
      "response_data": null
    },
    {
      "test": "Invalid Competition Code",
      "success": true,
      "details": "Correctly rejected invalid code",
      "timestamp": "2025-09-25T13:07:23.247643",
      "response_data": null
    },
    {
      "test": "Unauthorized Access",
      "success": true,
      "details": "Correctly rejected unauthorized request",
      "timestamp": "2025-09-25T13:07:23.780969",
      "response_data": null
    }
  ]
}